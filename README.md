# 诗成写作 (ShiCheng Writer)

**诗成写作**是一款专为作家、小说家和内容创作者打造的沉浸式桌面写作应用。它采用现代化的三栏布局，将书籍管理、沉浸式写作与灵感辅助系统完美融合，帮助您捕捉每一个稍纵即逝的创意，并将其高效转化为精彩的篇章。

## 💡 灵感来源



本项目的核心设计与功能受到了优秀的移动端写作软件 **笔落写作 (BiLuo Writer)** 的启发，并致力于在桌面端（PC）提供同样流畅、强大且专注的用户体验。



## ✨ 核心亮点

### 🖥️ 现代化界面与交互
- **三栏式布局**: 
  - **左栏**: 书籍与章节树状管理，支持分组、搜索与拖拽。
  - **中栏**: 纯净的文本编辑区域，支持书籍信息概览。
  - **右栏**: 强大的辅助面板（素材、灵感、时间轴），随手可查。
- **专注模式 (Focus Mode)**: 一键隐藏左右侧边栏（快捷键 `Ctrl+3`），让您完全沉浸在创作中。
- **主题自适应**: 内置**亮色 (Light)** 与 **暗色 (Dark)** 主题，支持跟随系统自动切换或手动切换（快捷键 `F11`），呵护您的视力。
- **字体调节**: 状态栏直接调节编辑器字体大小，适应不同显示需求。

### ✍️ 智能写作体验
- **沉浸式编辑器**:
  - **实时统计**: 状态栏实时显示当前章节字数、总字数及打字速度（字/分）。
  - **智能缩进**: 支持一键全文首行缩进（`Ctrl+I`）及取消缩进，回车自动缩进，排版更轻松。
  - **素材高亮**: 写作时自动高亮文中出现的“素材库”关键词（如角色名、地名），悬浮即可查看详细设定，避免设定冲突。
  - **自动保存**: 系统每 60 秒自动保存草稿，防止意外丢失；切换章节时自动保存。

### 📚 强大的书籍管理
- **多层级目录**: 支持“卷 - 章节”结构，清晰管理长篇小说。
- **书籍详情页**: 选中书籍时显示概览信息（字数、章节数、简介），一目了然。
- **分组管理**: 自定义书籍分组，让作品列表井井有条。
- **回收站机制**: 误删的书籍或章节会进入回收站，随时可以恢复，数据更安全。
- **即时搜索**: 独立的书籍和章节搜索框，快速定位内容。

### 💡 灵感与设定辅助
- **素材仓库**: 集中管理角色、地点、物品等设定，支持文本、模板等多种格式。
- **灵感中心**: 
  - **灵感锦囊**: 快速记录碎片化想法。
  - **灵感仓库**: 树状结构整理系统性大纲或创意。
- **时间轴系统**: 可视化管理故事线，支持创建多条时间轴，拖拽调整事件顺序，理清复杂的剧情脉络。

### 🛡️ 数据安全与备份
采用**三级本地备份策略**，全方位守护您的心血：
1. **快照线 (Snapshot)**: 分钟级的高频增量备份，记录最近的每一次修改。
2. **阶段点 (Stage Point)**: 每 30 分钟、手动触发或关闭软件时创建的完整备份。
3. **日终归档 (Archive)**: 每日首次启动时自动归档昨日数据，便于长期回溯。
> *所有备份均存储在本地 `backups` 目录下，您可以随时通过“备份管理”界面进行查看或恢复。*

### 📤 导出功能
- **一键导出**: 支持将整本书（含卷标、章节结构）导出为 `.txt` 文件（UTF-8 编码），方便在其他平台发布。

---

## 🛠️ 技术栈

- **编程语言**: Python 3
- **图形界面**: PySide6 (Qt for Python)
- **数据存储**: SQLite
- **架构**: 模块化设计，分离 UI 与业务逻辑

---

## 🚀 快速开始

### 1. 环境准备
确保您的电脑上已安装 Python 3.x。

### 2. 安装依赖
在项目根目录下运行以下命令安装所需的第三方库：

```bash
pip install -r requirements.txt
```

*(注：本项目主要依赖 `PySide6`)*

### 3. 运行程序

执行 `main.py` 启动应用：

Bash

```
python main.py
```

------

## 📂 项目结构

Plaintext

```
ShiCheng_Writer/
│
├── main.py                     # 程序启动入口
├── main_window.py              # 主窗口UI与核心交互逻辑
├── requirements.txt            # 项目依赖列表
│
├── modules/                    # 核心功能模块
│   ├── database.py             # SQLite数据库操作与ORM
│   ├── backup.py               # 三级备份策略实现
│   ├── theme_manager.py        # QSS样式表与主题管理
│   ├── material_system.py      # 素材管理逻辑
│   ├── inspiration.py          # 灵感中心逻辑
│   ├── timeline_system.py      # 时间轴逻辑
│   └── utils.py                # 通用工具类
│
├── widgets/                    # 自定义UI组件
│   ├── editor.py               # 增强型文本编辑器（含高亮/缩进）
│   ├── book_info_page.py       # 书籍详情展示页
│   └── dialogs.py              # 各类对话框（搜索、备份、回收站等）
│
├── resources/                  # 静态资源
│   ├── icons/                  # 图标文件
│   └── styles/                 # QSS样式文件 (Dark/Light)
│
├── logs/                       # 运行日志
└── backups/                    # 数据备份目录 (自动生成)
```

## 📄 许可证

本项目采用 MIT 许可证。